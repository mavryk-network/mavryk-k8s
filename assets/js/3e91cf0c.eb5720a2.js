"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[952],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=u(t),d=a,k=m["".concat(s,".").concat(d)]||m[d]||c[d]||o;return t?r.createElement(k,i(i({ref:n},p),{},{components:t})):r.createElement(k,i({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2901:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),i=["components"],l={},s="Public network node",u={unversionedId:"Public-Node",id:"Public-Node",title:"Public network node",description:"Connecting to a public net is easy!",source:"@site/Public-Node.md",sourceDirName:".",slug:"/Public-Node",permalink:"/Public-Node",tags:[],version:"current",frontMatter:{},sidebar:"mavrykK8sSidebar",previous:{title:"Prerequisites",permalink:"/Prerequisites"},next:{title:"Creating a Private Blockchain",permalink:"/Private-Chain"}},p={},c=[],m={toc:c};function d(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"public-network-node"},"Public network node"),(0,o.kt)("p",null,"Connecting to a public net is easy!"),(0,o.kt)("p",null,"(See ",(0,o.kt)("a",{parentName:"p",href:"https://protocol.mavryk.org/user/history_modes.html"},"here")," for info on snapshots and node history modes)"),(0,o.kt)("p",null,"Simply run the following to spin up a rolling history node:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm install mavryk-mainnet mavryk-network/mavryk-chain \\\n--namespace mavryk-network --create-namespace\n")),(0,o.kt)("p",null,"Running this results in:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Creating a Helm ",(0,o.kt)("a",{parentName:"li",href:"https://helm.sh/docs/intro/using_helm/#three-big-concepts"},"release")," named mavryk-mainnet for your k8s cluster."),(0,o.kt)("li",{parentName:"ul"},"k8s will spin up one regular (i.e. non-baking node) which will download and import a mainnet snapshot. This will take a few minutes."),(0,o.kt)("li",{parentName:"ul"},"Once the snapshot step is done, your node will be bootstrapped and syncing with mainnet!")),(0,o.kt)("p",null,"You can find your node in the mavryk-network namespace with some status information using ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl -n mavryk-network get pods -l appType=mavkit-node\n")),(0,o.kt)("p",null,"You can monitor (and follow using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-f")," flag) the logs of the snapshot downloader/import container:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl logs -n mavryk-network statefulset/rolling-node -c snapshot-downloader -f\n")),(0,o.kt)("p",null,"You can view logs for your node using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl -n mavryk-network logs -l appType=mavkit-node -c mavkit-node -f --prefix\n")),(0,o.kt)("p",null,"IMPORTANT:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Although spinning up a mainnet baker is possible, we do not recommend running a mainnet baker at this point in time. Secret keys should be handled via an HSM that should remain online, and the keys should be passed through a k8s secret to k8s. This functionality still needs to be implemented.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"You should be aware of ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube")," VM's allocated memory. Especially if you use ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube")," for other applications. It may run out of virtual memory say due to having large docker images. Being that snapshots are relatively large and increasing in size as the blockchain grows, when downloading one, you can potentially run out of disk space. The snapshot is deleted after import. According to ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube start --help"),", default allocated space is 20000mb. You can modify this via the ",(0,o.kt)("inlineCode",{parentName:"p"},"--disk-size")," flag. To view the memory usage of the VM, you can ssh into ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube"),"."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"\u276f minikube ssh\n                        _             _\n            _         _ ( )           ( )\n  ___ ___  (_)  ___  (_)| |/')  _   _ | |_      __\n/' _ ` _ `\\| |/' _ `\\| || , <  ( ) ( )| '_`\\  /'__`\\\n| ( ) ( ) || || ( ) || || |\\`\\ | (_) || |_) )(  ___/\n(_) (_) (_)(_)(_) (_)(_)(_) (_)`\\___/'(_,__/'`\\____)\n\n$ df -h\nFilesystem      Size  Used Avail Use% Mounted on\ntmpfs           5.2G  593M  4.6G  12% /\ndevtmpfs        2.8G     0  2.8G   0% /dev\ntmpfs           2.9G     0  2.9G   0% /dev/shm\ntmpfs           2.9G   50M  2.8G   2% /run\ntmpfs           2.9G     0  2.9G   0% /sys/fs/cgroup\ntmpfs           2.9G  8.0K  2.9G   1% /tmp\n/dev/vda1        17G   12G  4.2G  74% /mnt/vda1\n")))))}d.isMDXComponent=!0}}]);